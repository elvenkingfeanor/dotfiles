#!/bin/sh
#mmap
# create maps of minetest worlds
# check for world directories, and select one using fzf

selected=$(/usr/bin/find "$XDG_DATA_HOME"/luanti/worlds -type d | /usr/bin/fzf)

# error handling
if [ -z "$selected" ]; then
       /usr/bin/echo "No worlds selected"
       exit 1
       else
           shortsel=$(/usr/bin/echo "$selected" | /usr/bin/sed 's@.*worlds/@@')
fi

# after selection, let minetestmapper generate the map to specified location

/usr/bin/minetestmapper --draworigin --drawplayers -v -i "$selected" -o ~/mdi/pix/mmaps/"$shortsel"-"$(/usr/bin/date +%Y%m%d%H%M%S)".png
