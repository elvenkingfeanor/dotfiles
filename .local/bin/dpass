#!/bin/sh
#dpass
# use dmenu to retrieve pass entries
# credits to Luke Smith

password="$(/usr/bin/find "$XDG_DATA_HOME"/pass/ -type f -name '*.gpg' | \
    /usr/local/bin/dmenu -i -l 15 | \
    /usr/bin/sed 's@^.*pass/@@' | \
    /usr/bin/sed 's/\.gpg$//g')"

if [ -n "$password" ]; then
 if ! /usr/bin/pass show -c "$password"; then
  /usr/bin/notify-send "Oops!" "try again"
  exit 1
 else
    /usr/bin/notify-send "Success!" "$password copied to clipboard"
 fi
else
    /usr/bin/notify-send "Exiting..." "no pass selected"
    exit 1
fi
