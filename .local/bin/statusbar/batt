#!/bin/sh
#batt
# show battery status

if [ "$(/usr/bin/grep -i status /sys/class/power_supply/BAT0/uevent | /usr/bin/sed 's@^.*\=@@')" = "Discharging" ]; then
    stat="$(/usr/bin/echo "-")";
else
    stat="$(/usr/bin/echo "+")";
fi

cap=$(/usr/bin/grep -i "capacity=" /sys/class/power_supply/BAT0/uevent | /usr/bin/sed 's@^.*\=@@')

if [ "$stat" = "-" ] && [ "$cap" -le 20 ]; then
    /usr/bin/echo "$(/usr/bin/tput setaf 1)$stat$cap$(/usr/bin/tput sgr0)";
    /usr/bin/notify-send -u critical "Battery low" "Please plug-in charger"
elif [ "$stat" = "+" ] && [ "$cap" -ge 80 ]; then
    /usr/bin/echo "$(/usr/bin/tput setaf 1)$stat$cap$(/usr/bin/tput sgr0)";
    /usr/bin/notify-send -u critical "Battery full" "Please turn off charging"
else /usr/bin/echo "$stat$cap";
fi
