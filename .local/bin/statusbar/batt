#!/bin/sh
#batt
# show battery status

# get charging/discharging status
if /usr/bin/grep -iq discharging /sys/class/power_supply/BAT0/uevent; then
    stat="ğŸª«";
else
    stat="ğŸ”‹";
fi

# get present battery capacity
cap=$(/usr/bin/grep -i "capacity=" /sys/class/power_supply/BAT0/uevent | \
    /usr/bin/sed 's@^.*\=@@')

# formatted output with alerts
if /usr/bin/grep -iq discharging /sys/class/power_supply/BAT0/uevent && [ "$cap" -le 20 ]; then
    /usr/bin/notify-send -u critical "Battery low" "Please plug-in charger"
    /usr/bin/printf "%s" "â—$cap"
elif /usr/bin/grep -iq discharging /sys/class/power_supply/BAT0/uevent && [ "$cap" -ge 80 ]; then
    /usr/bin/notify-send -u critical "Battery full" "Please turn off charging"
    /usr/bin/printf "%s" "â—$cap"
else /usr/bin/printf "%s" "$stat$cap";
fi
