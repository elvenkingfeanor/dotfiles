#!/bin/sh
#micvol
# get speaker and mic volume status

micmute="$(/usr/bin/wpctl get-volume @DEFAULT_SOURCE@ | /usr/bin/cut -d ' ' -f 3)"
micvol="$(/usr/bin/wpctl get-volume @DEFAULT_SOURCE@ | /usr/bin/cut -d ' ' -f 2)"
spkmute="$(/usr/bin/wpctl get-volume @DEFAULT_SINK@ | /usr/bin/cut -d ' ' -f 3)"
spkvol="$(/usr/bin/wpctl get-volume @DEFAULT_SINK@ | /usr/bin/cut -d ' ' -f 2)"

if [ -n "$micmute" ]; then
    mic="$(/usr/bin/echo "off")";
else
    mic="$(/usr/bin/echo "$micvol*100/1" | /usr/bin/bc)";
fi

if [ -n "$spkmute" ]; then
    spk="$(/usr/bin/echo "off")";
else
    spk="$(/usr/bin/echo "$spkvol*100/1" | /usr/bin/bc)";
fi

/usr/bin/echo "$spk:$mic"
