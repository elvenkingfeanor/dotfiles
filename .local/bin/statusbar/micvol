#!/bin/sh
#micvol
# get speaker and mic volume status

speakermute="$(/usr/bin/wpctl get-volume @DEFAULT_SINK@ | /usr/bin/cut -d ' ' -f 3)"
speakervol="$(/usr/bin/wpctl get-volume @DEFAULT_SINK@ | /usr/bin/cut -d ' ' -f 2)"
microphonemute="$(/usr/bin/wpctl get-volume @DEFAULT_SOURCE@ | /usr/bin/cut -d ' ' -f 3)"
microphonevol="$(/usr/bin/wpctl get-volume @DEFAULT_SOURCE@ | /usr/bin/cut -d ' ' -f 2)"

if [ -n "$speakermute" ]; then
    spk="ðŸ”‡";
else
    spk="ðŸŽ§$(/usr/bin/printf "%s\n" "$speakervol*100/1" | /usr/bin/bc)";
fi

if [ -n "$microphonemute" ]; then
    mic="ðŸ”‡";
else
    mic="ðŸŽ¤$(/usr/bin/printf "%s\n" "$microphonevol*100/1" | /usr/bin/bc)";
    # the (/1) is required to prevent bc from outputting decimal
fi

/usr/bin/printf "%s" "$spk:$mic"
